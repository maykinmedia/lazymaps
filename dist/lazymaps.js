!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o=t();for(var a in o)("object"==typeof exports?exports:e)[a]=o[a]}}(this,function(){return function(e){function t(a){if(o[a])return o[a].exports;var n=o[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){return t?[].concat(o(document.querySelectorAll(e))).map(function(e){return new l(e,t)}):void r()}function r(){console.warn("No Google Maps API key provided, please pass key as second argument.")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}(),s=t.GOOGLE_MAPS_API="https://maps.googleapis.com/maps/api/js",l=function(){function e(t,o){return a(this,e),o?(this.map=t,this.googleMapsSrc=s+"?key="+o,this.setUpGoogleMaps()):void r()}return i(e,[{key:"setUpGoogleMaps",value:function(){return this.installGoogleMapsApi().then(this.createMap.bind(this))}},{key:"installGoogleMapsApi",value:function(){if(!this.isGoogleMapsApiInstalled()){var e=document.createElement("script");e.src=this.googleMapsSrc,document.head.appendChild(e)}return new Promise(function(e){function t(){if(window.google&&window.google.maps)return void e();setTimeout(t,100)}setTimeout(t,100)})}},{key:"isGoogleMapsApiInstalled",value:function(){var e=this;return!![].concat(o(document.scripts)).find(function(t){return t.src===e.googleMapsSrc})}},{key:"createMap",value:function(){var e=this;if(!this.map.dataset.coordinates||!this.map.dataset.zoom)return void console.warn("Please set data-cooordinates and data-zoom on the node you want to use as Google Maps instance.");this.geocoder=new google.maps.Geocoder;var t=parseFloat(this.map.dataset.coordinates.split(",")[0]),o=parseFloat(this.map.dataset.coordinates.split(",")[1]),a=parseInt(this.map.dataset.zoom);if(t&&o&&a){this.googleMap=new google.maps.Map(this.map,{center:{lat:t,lng:o},zoom:a,disableDefaultUI:!0});var n=this.map.dataset.markers;if(n){n=JSON.parse(n);var r=!0,i=!1,s=void 0;try{for(var l,p=n[Symbol.iterator]();!(r=(l=p.next()).done);r=!0)!function(){var t=l.value,o=parseFloat(t.latitude),a=parseFloat(t.longitude),n=new google.maps.InfoWindow({content:"<h1>"+t.label+"</h1><p>"+t.description+"</p>"}),r={url:e.map.dataset.markerIcon,scaledSize:new google.maps.Size(16,27)},i=new google.maps.Marker({map:e.googleMap,position:{lat:o,lng:a},title:t.label,optimized:!1,icon:r});i.addListener("click",function(){n.open(e.googleMap,i)})}()}catch(e){i=!0,s=e}finally{try{!r&&p.return&&p.return()}finally{if(i)throw s}}}}}}]),e}();t.default=l,t.GMap=l,t.lazymaps=n}])});